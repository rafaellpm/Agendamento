unit UCadProduto;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, UCadPai, FireDAC.Stan.Intf,
  FireDAC.Stan.Option, FireDAC.Stan.Param, FireDAC.Stan.Error, FireDAC.DatS,
  FireDAC.Phys.Intf, FireDAC.DApt.Intf, FireDAC.Stan.Async, FireDAC.DApt,
  Vcl.StdCtrls, Data.DB, FireDAC.Comp.DataSet, FireDAC.Comp.Client, Vcl.Buttons,
  Vcl.ExtCtrls, FireDAC.UI.Intf, FireDAC.Stan.Def, FireDAC.Stan.Pool,
  FireDAC.Phys, FireDAC.Phys.FB, FireDAC.Phys.FBDef, FireDAC.VCLUI.Wait;

type
  TFrmCadProd = class(TFrmCadPai)
    EdtCodInterno: TEdit;
    EdtDescricao: TEdit;
    EdtCodBarras: TEdit;
    EdtCodFornecedor: TEdit;
    EdtDescForn: TEdit;
    EdtDataCadastro: TEdit;
    EdtModificacao: TEdit;
    EdtEstoque: TEdit;
    EdtCodDep: TEdit;
    EdtNomeDep: TEdit;
    Label1: TLabel;
    Label2: TLabel;
    Label3: TLabel;
    Label4: TLabel;
    Label5: TLabel;
    Label6: TLabel;
    Label7: TLabel;
    Label8: TLabel;
    Label9: TLabel;
    Label10: TLabel;
    EdtSubDep: TEdit;
    Label11: TLabel;
    EdtDescSub: TEdit;
    Label12: TLabel;
    CbTipoProd: TComboBox;
    EdtCusto: TEdit;
    EdtVenda: TEdit;
    Label13: TLabel;
    Label14: TLabel;
    Label15: TLabel;
    procedure inserirproduto;
    procedure BtnSalvarClick(Sender: TObject);
    procedure FormShow(Sender: TObject);
    procedure BitBtn2Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  FrmCadProd: TFrmCadProd;

implementation

uses
  UConexao, UConsultaProduto;

{$R *.dfm}

procedure TFrmCadProd.BitBtn2Click(Sender: TObject);
begin
  inherited;
  FrmConsultaProduto := TFrmConsultaProduto.Create(self);
  try
    FrmConsultaProduto.ShowModal;
  finally
    FreeAndNil(FrmConsultaProduto);
  end;
end;

procedure TFrmCadProd.BtnSalvarClick(Sender: TObject);
begin
  inherited;
  inserirproduto;
end;

procedure TFrmCadProd.FormShow(Sender: TObject);
begin
  inherited;
  sqlstr  := 'select max(id_produto)+1 as codigo from produtos';
  if not ConsultaMySql(FDQuery1,sqlstr) then
    EdtCodInterno.Text  := '1'
  else
    EdtCodInterno.Text  := FDQuery1.FieldByName('codigo').AsString;
end;

procedure TFrmCadProd.inserirproduto;
begin

  try
    FDQuery1.ExecSQL;
  finally

  end;
end;

end.
